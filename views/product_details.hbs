<section id="services" class="services section-bg mt-5" style="height: 100vh;">
   <div class="container">
      <div class="row row-sm mt-5">
         <div class="col-md-6 _boxzoom">
            <div class="zoom-thumb">
               <ul class="piclist">
                  <li><img src="/product_Images/{{prodDetails.allImages.[0].main_i}}" alt=""></li>
                  <li><img src="/product_Images/{{prodDetails.allImages.[0].next_i}}" alt=""></li>
                  <li><img src="/product_Images/{{prodDetails.allImages.[0].next_i_1}}" alt=""></li>
                  <li><img src="/product_Images/{{prodDetails.allImages.[0].next_i_2}}" alt=""></li>

               </ul>
            </div>
            <div class="_product-images">
               <div class="picZoomer">
                  <img class="my_img" src="/product_Images/{{prodDetails.allImages.[0].main_i}}" alt="">
               </div>
            </div>
         </div>
       
         <div class="col-md-6 ">
              <form action="/add_to_cart/{{prodDetails._id}}" method="post" id="details-form">
            <div class="_product-detail-content ">
               <p class="_p-name mt-4" style="font-family:'Courier New', Courier, monospace; font-weight: 900;"> {{prodDetails.product_name}} </p>
               <div class="_p-price-box">
                  {{!-- <div class="p-list"> --}}
                     {{!-- <span> Rs. <i class="fa fa-inr"></i> <del> {{prodDetails.price}}</del>({{prodDetails.discount}})%OFF</span> --}}
                     {{!-- <span class="price"> Rs.{{prodDetails.price}} </span> --}}
                  <div class="product_price " >Rs.
                     {{!-- Rs.{{prodDetails.price}} --}}
                     {{!-- <label class="form-label mt-2" for="form1">Rs.</label> --}}
                     <span  class="mt-2" style="font-weight:900 ;" id="product_id">{{prodDetails.price}}</span> <p>({{prodDetails.discount}}%OFF)</p>
                     <span  class="mt-2" id="product_id_dis" hidden>{{prodDetails.discount}}</span> 
                     <input id="product_id" min="0" name="price" value="{{prodDetails.price}}" type="number" class="form-control " style="width: 100px; margin-left: 15px; border: none; font-weight: bold;" hidden/> 
                     <input id="product_id_dis" min="0" name="discount" value="{{prodDetails.discount}}" type="number" class="form-control " style="width: 100px; margin-left: 15px; border: none; font-weight: bold;" hidden />
                  </div>

                  {{!-- </div> --}}
                  <div class="_p-features p-2">
                     {{!-- <span> Description </span> --}}
                     {{prodDetails.description}}
                  </div>
                  <div class="_p-features p-2">
                     <span> Delivery Date</span>
                     <input type="date" id="delivery_date" name="delivery_date" style="border-radius: 5px; width:150px">

                  </div>


                  <div class="form-check form-check-inline">
                     <input class="form-check-input" type="radio" name="weight" id="weight1"
                        value=0.5 >
                     <label class="form-check-label" for="inlineRadio1">0.5Kg</label>
                  </div>
                  <div class="form-check form-check-inline">
                     <input class="form-check-input" type="radio" name="weight" id="weight1"
                        value=1>
                     <label class="form-check-label" for="inlineRadio2">1Kg</label>
                  </div>
                  <div class="form-check form-check-inline">
                     <input class="form-check-input" type="radio" name="weight" id="weight1"
                        value=2 >
                     <label class="form-check-label" for="inlineRadio1">2kg</label>
                  </div>
                  <div class="form-check form-check-inline">
                     <input class="form-check-input" type="radio" name="weight" id="weight1"
                        value=3>
                     <label class="form-check-label" for="inlineRadio2">3kg</label>
                  </div>



                  <div class="foem-check pt-2">
                     <label for="fname">Message on cake</label><br>
                     <input type="text" id="message" name="message" style="border-radius: 5px; width:400px">
                  </div>





                 
                     <div class="d-flex justify-content-center mt-5">
                        <button class="btn"
                           style="text-decoration: none;background-color:rgba(102, 22, 22, 1)  ; color: white;" type="submit">Add
                           to cart</button>
                     </div>
                 

                  </form>
               </div>
            </div>
         </div>
      </div>
   </div>
</section>



<script>

   /*!     
       jquery.picZoomer.js
       v 1.0
       David
       http://www.CodingSerf.com
*/

   //放大镜控件
   ; (function ($) {
      $.fn.picZoomer = function (options) {
         var opts = $.extend({}, $.fn.picZoomer.defaults, options),
            $this = this,
            $picBD = $('<div class="picZoomer-pic-wp"></div>').css({ 'width': opts.picWidth + 'px', 'height': opts.picHeight + 'px' }).appendTo($this),
            $pic = $this.children('img').addClass('picZoomer-pic').appendTo($picBD),
            $cursor = $('<div class="picZoomer-cursor"><i class="f-is picZoomCursor-ico"></i></div>').appendTo($picBD),
            cursorSizeHalf = { w: $cursor.width() / 2, h: $cursor.height() / 2 },
            $zoomWP = $('<div class="picZoomer-zoom-wp"><img src="" alt="" class="picZoomer-zoom-pic"></div>').appendTo($this),
            $zoomPic = $zoomWP.find('.picZoomer-zoom-pic'),
            picBDOffset = { x: $picBD.offset().left, y: $picBD.offset().top };


         opts.zoomWidth = opts.zoomWidth || opts.picWidth;
         opts.zoomHeight = opts.zoomHeight || opts.picHeight;
         var zoomWPSizeHalf = { w: opts.zoomWidth / 2, h: opts.zoomHeight / 2 };

         //初始化zoom容器大小
         $zoomWP.css({ 'width': opts.zoomWidth + 'px', 'height': opts.zoomHeight + 'px' });
         $zoomWP.css(opts.zoomerPosition || { top: 0, left: opts.picWidth + 30 + 'px' });
         //初始化zoom图片大小
         $zoomPic.css({ 'width': opts.picWidth * opts.scale + 'px', 'height': opts.picHeight * opts.scale + 'px' });

         //初始化事件
         $picBD.on('mouseenter', function (event) {
            $cursor.show();
            $zoomWP.show();
            $zoomPic.attr('src', $pic.attr('src'))
         }).on('mouseleave', function (event) {
            $cursor.hide();
            $zoomWP.hide();
         }).on('mousemove', function (event) {
            var x = event.pageX - picBDOffset.x,
               y = event.pageY - picBDOffset.y;

            $cursor.css({ 'left': x - cursorSizeHalf.w + 'px', 'top': y - cursorSizeHalf.h + 'px' });
            $zoomPic.css({ 'left': -(x * opts.scale - zoomWPSizeHalf.w) + 'px', 'top': -(y * opts.scale - zoomWPSizeHalf.h) + 'px' });

         });
         return $this;

      };
      $.fn.picZoomer.defaults = {
         picHeight: 460,
         scale: 2.5,
         zoomerPosition: { top: '0', left: '380px' },

         zoomWidth: 400,
         zoomHeight: 460
      };
   })(jQuery);



   $(document).ready(function () {
      $('.picZoomer').picZoomer();
      $('.piclist li').on('click', function (event) {
         var $pic = $(this).find('img');
         $('.picZoomer-pic').attr('src', $pic.attr('src'));
      });

      var owl = $('#recent_post');
      owl.owlCarousel({
         margin: 20,
         dots: false,
         nav: true,
         navText: [
            "<i class='fa fa-chevron-left'></i>",
            "<i class='fa fa-chevron-right'></i>"
         ],
         autoplay: true,
         autoplayHoverPause: true,
         responsive: {
            0: {
               items: 2
            },
            600: {
               items: 3
            },
            1000: {
               items: 5
            },
            1200: {
               items: 4
            }
         }
      });

      $('.decrease_').click(function () {
         decreaseValue(this);
      });
      $('.increase_').click(function () {
         increaseValue(this);
      });
      function increaseValue(_this) {
         var value = parseInt($(_this).siblings('input#number').val(), 10);
         value = isNaN(value) ? 0 : value;
         value++;
         $(_this).siblings('input#number').val(value);
      }

      function decreaseValue(_this) {
         var value = parseInt($(_this).siblings('input#number').val(), 10);
         value = isNaN(value) ? 0 : value;
         value < 1 ? value = 1 : '';
         value--;
         $(_this).siblings('input#number').val(value);
      }
   });





let price=$('#product_id').html()

let disPer=$('#product_id_dis').html()

$("input[name='weight']").bind('change', function() {
  
    switch (this.value) {
    case "0.5":
        amount = 1;
        break;
    case "1":
        amount = 2;
        break;
    case "2":
        amount = 4;
        break;
    case "3":
        amount = 6;
        break;
    } 

      tPrice1=parseInt(price)*amount
      tperc=parseInt(disPer)*0.01
       $('#product_id_dis').html(parseFloat(tperc))
      //tPrice=parseFloat(tPrice1)-parseFloat(parseFloat(tPrice1)*parseFloat(tperc))
      tPrice=tPrice1-(tPrice1*tperc)
      $("#product_id").html(parseInt(tPrice))
});

</script>
